<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'>

  <style>
    .form-check-label {
      padding-right: 18px;
    }

    .container,
    .form-control {
      background-color: rgba(211, 211,211, 0.75);
    }

    .form-control {
      border-color: darkgray;
    }

    body {
      background-image: url("https://raw.githubusercontent.com/kkiathub/FriendFinder/master/app/data/friends1.jpg");
      background-size: cover;
      background-repeat: no-repeat;
    }
  </style>
</head>

<body>

  <div class="container">

    <h2 class="py-3 text-center">Survey Questions</h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <hr>

    <h3><strong>Question 1</strong></h3>
    <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd11">
          <input type="radio" class="form-check-input" id="rd11" name="q1" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd12">
          <input type="radio" class="form-check-input" id="rd12" name="q1" value="2">2
        </label>
        <label class="form-check-label" for="rd13">
          <input type="radio" class="form-check-input" id="rd13" name="q1" value="3">3
        </label>
        <label class="form-check-label" for="rd14">
          <input type="radio" class="form-check-input" id="rd14" name="q1" value="4">4
        </label>
        <label class="form-check-label" for="rd15">
          <input type="radio" class="form-check-input" id="rd15" name="q1" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 2</strong></h3>
    <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd21">
          <input type="radio" class="form-check-input" id="rd21" name="q2" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd22">
          <input type="radio" class="form-check-input" id="rd22" name="q2" value="2">2
        </label>
        <label class="form-check-label" for="rd23">
          <input type="radio" class="form-check-input" id="rd23" name="q2" value="3">3
        </label>
        <label class="form-check-label" for="rd24">
          <input type="radio" class="form-check-input" id="rd24" name="q2" value="4">4
        </label>
        <label class="form-check-label" for="rd25">
          <input type="radio" class="form-check-input" id="rd25" name="q2" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 3</strong></h3>
    <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd31">
          <input type="radio" class="form-check-input" id="rd31" name="q3" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd32">
          <input type="radio" class="form-check-input" id="rd32" name="q3" value="2">2
        </label>
        <label class="form-check-label" for="rd33">
          <input type="radio" class="form-check-input" id="rd33" name="q3" value="3">3
        </label>
        <label class="form-check-label" for="rd34">
          <input type="radio" class="form-check-input" id="rd34" name="q3" value="4">4
        </label>
        <label class="form-check-label" for="rd35">
          <input type="radio" class="form-check-input" id="rd35" name="q3" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 4</strong></h3>
    <h4>You rarely do something just out of sheer curiosity.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd41">
          <input type="radio" class="form-check-input" id="rd41" name="q4" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd42">
          <input type="radio" class="form-check-input" id="rd42" name="q4" value="2">2
        </label>
        <label class="form-check-label" for="rd43">
          <input type="radio" class="form-check-input" id="rd43" name="q4" value="3">3
        </label>
        <label class="form-check-label" for="rd44">
          <input type="radio" class="form-check-input" id="rd44" name="q4" value="4">4
        </label>
        <label class="form-check-label" for="rd45">
          <input type="radio" class="form-check-input" id="rd45" name="q4" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 5</strong></h3>
    <h4>People can rarely upset you.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd51">
          <input type="radio" class="form-check-input" id="rd51" name="q5" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd52">
          <input type="radio" class="form-check-input" id="rd52" name="q5" value="2">2
        </label>
        <label class="form-check-label" for="rd53">
          <input type="radio" class="form-check-input" id="rd53" name="q5" value="3">3
        </label>
        <label class="form-check-label" for="rd54">
          <input type="radio" class="form-check-input" id="rd54" name="q5" value="4">4
        </label>
        <label class="form-check-label" for="rd55">
          <input type="radio" class="form-check-input" id="rd55" name="q5" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>


    <h3><strong>Question 6</strong></h3>
    <h4>It is often difficult for you to relate to other people’s feelings.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd61">
          <input type="radio" class="form-check-input" id="rd61" name="q6" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd62">
          <input type="radio" class="form-check-input" id="rd62" name="q6" value="2">2
        </label>
        <label class="form-check-label" for="rd63">
          <input type="radio" class="form-check-input" id="rd63" name="q6" value="3">3
        </label>
        <label class="form-check-label" for="rd64">
          <input type="radio" class="form-check-input" id="rd64" name="q6" value="4">4
        </label>
        <label class="form-check-label" for="rd65">
          <input type="radio" class="form-check-input" id="rd65" name="q6" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 7</strong></h3>
    <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd71">
          <input type="radio" class="form-check-input" id="rd71" name="q7" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd72">
          <input type="radio" class="form-check-input" id="rd72" name="q7" value="2">2
        </label>
        <label class="form-check-label" for="rd73">
          <input type="radio" class="form-check-input" id="rd73" name="q7" value="3">3
        </label>
        <label class="form-check-label" for="rd74">
          <input type="radio" class="form-check-input" id="rd74" name="q7" value="4">4
        </label>
        <label class="form-check-label" for="rd75">
          <input type="radio" class="form-check-input" id="rd75" name="q7" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 8</strong></h3>
    <h4>You rarely get carried away by fantasies and ideas.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd81">
          <input type="radio" class="form-check-input" id="rd81" name="q8" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd82">
          <input type="radio" class="form-check-input" id="rd82" name="q8" value="2">2
        </label>
        <label class="form-check-label" for="rd83">
          <input type="radio" class="form-check-input" id="rd83" name="q8" value="3">3
        </label>
        <label class="form-check-label" for="rd84">
          <input type="radio" class="form-check-input" id="rd84" name="q8" value="4">4
        </label>
        <label class="form-check-label" for="rd85">
          <input type="radio" class="form-check-input" id="rd85" name="q8" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 9</strong></h3>
    <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.
    </h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd91">
          <input type="radio" class="form-check-input" id="rd91" name="q9" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd92">
          <input type="radio" class="form-check-input" id="rd92" name="q9" value="2">2
        </label>
        <label class="form-check-label" for="rd93">
          <input type="radio" class="form-check-input" id="rd93" name="q9" value="3">3
        </label>
        <label class="form-check-label" for="rd94">
          <input type="radio" class="form-check-input" id="rd94" name="q9" value="4">4
        </label>
        <label class="form-check-label" for="rd95">
          <input type="radio" class="form-check-input" id="rd95" name="q9" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <h3><strong>Question 10</strong></h3>
    <h4>You feel more energetic after spending time with a group of people.</h4>
    <form>
      <div class="form-check-inline mb-3">
        <label class="form-check-label" for="rd101">
          <input type="radio" class="form-check-input" id="rd101" name="q10" value="1">1 (Strong Disagree)
        </label>
        <label class="form-check-label" for="rd102">
          <input type="radio" class="form-check-input" id="rd102" name="q10" value="2">2
        </label>
        <label class="form-check-label" for="rd103">
          <input type="radio" class="form-check-input" id="rd103" name="q10" value="3">3
        </label>
        <label class="form-check-label" for="rd104">
          <input type="radio" class="form-check-input" id="rd104" name="q10" value="4">4
        </label>
        <label class="form-check-label" for="rd105">
          <input type="radio" class="form-check-input" id="rd105" name="q10" value="5">5 (Strongly Agree)
        </label>
      </div>
    </form>

    <br>
    <br>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg" id="submit"><i class="fa fa-check-circle"
        aria-hidden="true"></i> Submit</button>

      <a href="/"><button class="btn btn-primary btn-lg" id="btn-home"><i class="fas fa-home"
        aria-hidden="true"></i> Home</button></a>
    <hr>
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a></p>
      </div>
    </footer>

  </div>

  <!-- Modal -->
  <div id="results-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title"><strong>Best Match</strong></h2>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <h2 id="match-name"></h2>
          <img id="match-img" alt="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">

    // Capture the form inputs
    $("#submit").on("click", function (event) {
      event.preventDefault();

      var surveyResult = [];

      // Form validation
      function validateForm() {
        var isValid = true;
        $(".form-control").each(function () {
          console.log("this " + $(this).val());
          if ($(this).val() === "") {
            isValid = false;
            return;
          }
        });

        if (!isValid)
          return false;

        for (var i = 1; i <= 10; i++) {
          var radioValue = $("input[name='q" + i + "']:checked").val();
          surveyResult.push(radioValue);
          if (!radioValue)
            return false;
        }

        return true;
      }

      // If all required fields are filled
      if (validateForm()) {
        // Create an object for the user"s data
        var userData = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          scores: surveyResult
        };

        // AJAX post the data to the friends API.
        $.post("/api/friends", userData, function (data) {

          console.log(userData);
          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.photo);

          // Show the modal with the best match
          $("#results-modal").modal("toggle");

        });
      } else {
        alert("Please fill out all fields before submitting!");
      }
    });

    // this is to make sure the image is properly displayed on modal.
    $("#match-img").load(function () {
      var img = document.getElementById("match-img");
      if (img.naturalWidth > img.naturalHeight) {
        $(this).attr("style", "width: 100%;object-fit: cover;");
      } else {
        $(this).attr("style", "height:45vh;object-fit: cover;");
      }
    });
  </script>

</body>

</html>